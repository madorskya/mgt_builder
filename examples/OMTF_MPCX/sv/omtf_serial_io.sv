// This code was automatically generated by FPGA MGT Builder
// Timestamp: 2021-06-09 13:05:44.027
// User: madorsky
// FPGA MGT builder homepage: <link>

`include "drp_interface.sv"
`include "mgt_interfaces.sv"
module omtf_serial_io
(
	drp.in drp_fif,
	input drpclk,
	input [15:0] refclk_p,
	input [15:0] refclk_n,
	mgt_rx.in mpc0_rx [3:0]
);
	localparam quadn = 1;
	drp #(.AW(12)) drp_qif [quadn-1:0]();
	drp_mux_fpga #(.N(quadn), .AW_QUAD(12)) drpm (drp_qif, drp_fif, drpclk);

	mgt_tx mgt_tx_if [quadn-1:0][3:0]();
	mgt_rx mgt_rx_if [quadn-1:0][3:0]();
	wire [ 3:0] mgt_gtrefclk0 [quadn-1:0];
	wire [ 3:0] mgt_txusrclk [quadn-1:0];
	wire        com_refclkoutmonitor [quadn-1:0];
	wire        com_gtrefclk0 [quadn-1:0];
	wire [15:0] refclk;
	genvar gi;
	generate
		for (gi = 0; gi < quadn; gi++)
		begin: quad_loop
			GTHE2_QUAD #(.ind(gi)) GTHE2_QUAD_inst
			(
				.drp_qif (drp_qif [gi]),
				.drpclk (drpclk),
				.mgt_tx_if (mgt_tx_if [gi]),
				.mgt_rx_if (mgt_rx_if [gi]),
				.mgt_gtrefclk0              (mgt_gtrefclk0              [gi]),
				.mgt_txusrclk               (mgt_txusrclk               [gi]),
				.com_refclkoutmonitor       (com_refclkoutmonitor       [gi]),
				.com_gtrefclk0              (com_gtrefclk0              [gi])
			);
		end
		for (gi = 0; gi < 16; gi++)
		begin: refclk_loop
			IBUFDS_GTE2 refclk_buf
			(
			    .O     (refclk   [gi]),
			    .ODIV2 (),
			    .CEB   (1'b0),
			    .I     (refclk_p [gi]),
			    .IB    (refclk_n [gi])
			);
		end
	endgenerate
	assign_mgt_rx ari0 (mgt_rx_if [0][0], mpc0_rx [0]);
	assign_mgt_rx ari1 (mgt_rx_if [0][1], mpc0_rx [1]);
	assign_mgt_rx ari2 (mgt_rx_if [0][2], mpc0_rx [2]);
	assign_mgt_rx ari3 (mgt_rx_if [0][3], mpc0_rx [3]);
	assign mgt_gtrefclk0 [0][0] = refclk [12]; // mpc0_rx 0
	assign mgt_gtrefclk0 [0][1] = refclk [12]; // mpc0_rx 1
	assign mgt_gtrefclk0 [0][2] = refclk [12]; // mpc0_rx 2
	assign mgt_gtrefclk0 [0][3] = refclk [12]; // mpc0_rx 3
endmodule
