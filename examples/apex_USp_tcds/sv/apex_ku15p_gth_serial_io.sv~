// This code was automatically generated by FPGA MGT Builder
// Timestamp: 2021-01-30 10:52:57.958
// User: madorsky
// FPGA MGT builder homepage: <link>

`include "drp_interface.sv"
`include "mgt_gth_interfaces.sv"
module apex_ku15p_gth_serial_io
(
	drp.in drp_gth_fif,
	input drpclk,
	input [5:0] refclk_p,
	input [5:0] refclk_n,
	mgt_gth_rx.in tcds_rx [0:0],
	mgt_gth_tx.in tcds_tx [0:0],
	output TCDS_4_mmcm_clk
);
	localparam quadn = 1;
	drp #(.AW(13)) drp_gth_qif [quadn-1:0]();
	drp_mux_fpga #(.N(quadn), .AW_QUAD(13)) drpm (drp_gth_qif, drp_gth_fif, drpclk);

	mgt_gth_tx mgt_gth_tx_if [quadn-1:0][3:0]();
	mgt_gth_rx mgt_gth_rx_if [quadn-1:0][3:0]();
	wire        mgt_txlatclk ;
	wire [ 3:0] mgt_txusrclk [quadn-1:0];
	wire        com_gtrefclk00 [quadn-1:0];
	wire        com_gtrefclk01 [quadn-1:0];
	wire [5:0] refclk;
	genvar gi;
	generate
		for (gi = 0; gi < quadn; gi++)
		begin: quad_loop
			GTHE4_QUAD #(.ind(gi)) GTHE4_QUAD_inst
			(
				.drp_gth_qif (drp_gth_qif [gi]),
				.drpclk (drpclk),
				.mgt_gth_tx_if (mgt_gth_tx_if [gi]),
				.mgt_gth_rx_if (mgt_gth_rx_if [gi]),
				.mgt_txlatclk               (mgt_txlatclk              ),
				.mgt_txusrclk               (mgt_txusrclk               [gi]),
				.com_gtrefclk00             (com_gtrefclk00             [gi]),
				.com_gtrefclk01             (com_gtrefclk01             [gi])
			);
		end
		for (gi = 0; gi < 6; gi++)
		begin: refclk_loop
			IBUFDS_GTE4 #
			(
				.REFCLK_EN_TX_PATH  (1'b0),
				.REFCLK_HROW_CK_SEL (2'b00),
				.REFCLK_ICNTL_RX    (2'b00)
			) 
			refclk_buf
			(
				.I     (refclk_p [gi]),
				.IB    (refclk_n [gi]),
				.CEB   (1'b0),
				.O     (refclk   [gi]),
				.ODIV2 ()
			);
		end
	endgenerate
	assign_mgt_gth_rx ari0 (mgt_gth_rx_if [0][1], tcds_rx [0]);
	assign_mgt_gth_tx ati1 (mgt_gth_tx_if [0][3], tcds_tx [0]);
	assign com_gtrefclk00 [0] = refclk [4]; // tcds_rx 0
	assign com_gtrefclk00 [0] = refclk [4]; // tcds_tx 0
	TCDS_mmcm TCDS_4_inst (.O(TCDS_4_mmcm_clk), .I(mgt_gth_tx_if[0][3].txoutclk));
	assign mgt_txusrclk[0][3] = TCDS_4_mmcm_clk; // tcds_tx0
endmodule
